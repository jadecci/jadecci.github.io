<!DOCTYPE html>
<html lang="en-US">
  <head>

    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Useful Commands | Jade Sea</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Useful Commands" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="General Notes" />
<meta property="og:description" content="General Notes" />
<link rel="canonical" href="http://localhost:4000/notes/Commands.html" />
<meta property="og:url" content="http://localhost:4000/notes/Commands.html" />
<meta property="og:site_name" content="Jade Sea" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-10-10T16:07:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Useful Commands" />
<script type="application/ld+json">
{"url":"http://localhost:4000/notes/Commands.html","@type":"BlogPosting","headline":"Useful Commands","dateModified":"2019-10-10T16:07:00+02:00","datePublished":"2019-10-10T16:07:00+02:00","description":"General Notes","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/notes/Commands.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#02fa5d">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=a40b54323b1e7893fa662bf680c383ddcc6ae29f">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

  </head>
  <body>

    <header class="page-header" role="banner">
      <h1 class="project-name">Useful Commands</h1>
      <h2 class="project-tagline">General Notes</h2>
      <!-- Github stuff
      
        <a href="https://github.com/jadecci/jadecci.github.io" class="btn">View on GitHub</a>
      
      
      -->
    </header>
    
    <div class="topnav">
      <a class="active" href="/index.html">Home</a>
      <a href="#notes">Notes List</a>
      <a href="#others">Others</a>
      <a href="#about">About Me</a>
    </div>

    <main id="content" class="main-content" role="main">
      <h1 id="linux">Linux</h1>

<h2 id="linux-in-general">Linux in general</h2>

<ul>
  <li>Give read &amp; execute rights to all users for a folder and its subfolders</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> <span class="nt">-R</span> 755 <span class="nv">$folder_name</span>
</code></pre></div></div>

<ul>
  <li>Find file in current folder and subfolders</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find <span class="nb">.</span> <span class="nt">-name</span> <span class="s2">"</span><span class="nv">$file_name</span><span class="s2">"</span>
</code></pre></div></div>

<ul>
  <li>Print lines (i.e. rows) <code class="language-plaintext highlighter-rouge">x</code> to <code class="language-plaintext highlighter-rouge">y</code> in a text file</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">head</span> <span class="nt">-y</span> <span class="nv">$file_name</span> | <span class="nb">tail</span> <span class="nt">-n</span> <span class="k">$((</span>y-x+1<span class="k">))</span>
</code></pre></div></div>

<ul>
  <li>Extract columns <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code> from a csv file</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> <span class="nv">$file_name</span>.csv | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">','</span> <span class="nt">-f</span> x,y
</code></pre></div></div>

<ul>
  <li>Rename part of file name(s)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rename <span class="s2">"s/</span><span class="k">${</span><span class="nv">old_part</span><span class="k">}</span><span class="s2">/</span><span class="k">${</span><span class="nv">new_part</span><span class="k">}</span><span class="s2">/"</span> <span class="nv">$file_name</span>
</code></pre></div></div>

<ul>
  <li>List size of folders/files in ascending order</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">du</span> <span class="nt">-sh</span> <span class="k">*</span> | <span class="nb">sort</span> <span class="nt">-h</span>
</code></pre></div></div>

<h2 id="macos-terminal-uname--darwin">MacOS Terminal (uname = Darwin)</h2>

<ul>
  <li>After any major/semi-major update, the command line tool should be updated with</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xcode-select <span class="nt">--install</span>
</code></pre></div></div>

<ul>
  <li>Fix broken links in dylib</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>otool <span class="nt">-L</span> <span class="nv">$dylib_file</span>
<span class="nb">sudo </span>install_name_tool <span class="nv">$dylib_file</span> <span class="nt">-change</span> <span class="nv">$old_link</span> <span class="nv">$new_link</span>
</code></pre></div></div>

<ul>
  <li>Insert the plus/minus sign ±: <code class="language-plaintext highlighter-rouge">shift</code> + <code class="language-plaintext highlighter-rouge">alt (options)</code> + <code class="language-plaintext highlighter-rouge">=</code></li>
</ul>

<h2 id="git-related">Git related</h2>

<ul>
  <li>Create a new branch based on the <code class="language-plaintext highlighter-rouge">develop</code> branch</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout <span class="nt">-b</span> <span class="nv">$branch_name</span> develop
</code></pre></div></div>

<ul>
  <li>Fetch a remote branch (which does not exist locally)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git switch <span class="nv">$branch_name</span>
</code></pre></div></div>

<ul>
  <li>Delete last commit, keeping the work done</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git reset <span class="nt">--soft</span> HEAD~1
</code></pre></div></div>

<ul>
  <li>Delete a commit, discarding work done (i.e. reverting the changes)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git reset <span class="nt">--hard</span> <span class="nv">$commit_number</span>
</code></pre></div></div>

<ul>
  <li>Unstage all staged files</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git reset
</code></pre></div></div>

<ul>
  <li>Revert all local uncommitted changes</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout <span class="nt">--</span> <span class="nb">.</span>
</code></pre></div></div>

<ul>
  <li>Delete  a branch from both local and remote repositories</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git branch <span class="nt">-d</span> <span class="nv">$branch_name</span>
git push origin <span class="nt">--delete</span> <span class="nv">$branch_name</span>
</code></pre></div></div>

<ul>
  <li>Update a forked repository with feature branch <code class="language-plaintext highlighter-rouge">$branch_name</code>(assuming no conflict)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout develop
git pull upstream develop
git push origin <span class="nt">-f</span> develop
git checkout <span class="nv">$branch_name</span>
git rebase develop
</code></pre></div></div>

<ul>
  <li>Changed a cloned copy to a forked copy &amp; make current branch track a forked branch (e.g. <code class="language-plaintext highlighter-rouge">master</code> branch)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git remote rename origin upstream
git remote add origin <span class="nv">$fork_address</span>
git branch <span class="nt">-u</span> origin/master
</code></pre></div></div>

<ul>
  <li>Check changes in a file before committing</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span>unstaged<span class="o">)</span> git diff <span class="nv">$file_name</span>
<span class="o">(</span>staged<span class="o">)</span> git diff <span class="nt">--cached</span> <span class="nv">$file_named</span>
</code></pre></div></div>

<h2 id="bash">Bash</h2>

<ul>
  <li>Extract part of a string (e.g. getting 0843 from Sub0843_Ses1)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">string</span><span class="o">=</span>Sub0843_Ses1
<span class="nv">string_cut_end</span><span class="o">=</span><span class="k">${</span><span class="nv">string</span><span class="p">%_Ses1</span><span class="k">}</span>
<span class="nv">string_cut_front</span><span class="o">=</span><span class="k">${</span><span class="nv">string_cut_end</span><span class="p">#Sub</span><span class="k">}</span>
</code></pre></div></div>

<ul>
  <li>Read values from a csv column into an array</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">arr</span><span class="o">=(</span><span class="si">$(</span><span class="nb">cat</span> <span class="nv">$file_name</span>.csv | <span class="nb">cut</span> <span class="nt">-d</span> <span class="s1">','</span> <span class="nt">-f</span> <span class="nv">$column</span><span class="si">)</span><span class="o">)</span>
</code></pre></div></div>
<ul>
  <li>Remove Windows/DOS CRLF <a href="https://en.wikipedia.org/wiki/Newline#Representations">line endings</a> from an array element</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">arr1</span><span class="o">=</span><span class="k">${</span><span class="nv">arr</span><span class="p">[1]%</span><span class="s1">$'</span><span class="se">\r</span><span class="s1">'</span><span class="k">}</span>
</code></pre></div></div>

<ul>
  <li>Remove all leading spaces from <code class="language-plaintext highlighter-rouge">zsh</code> console output</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">string</span><span class="o">=</span><span class="s2">"    Sub0843_Ses1"</span>
<span class="nv">string_cut</span><span class="o">=</span><span class="k">${</span><span class="nv">string</span><span class="p">##*[[</span>:blank:]]<span class="k">}</span>
</code></pre></div></div>

<ul>
  <li>Floating point operations (e.g. <code class="language-plaintext highlighter-rouge">x+y/365</code>)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo </span>x y 365 | <span class="nb">awk</span> <span class="s1">'{printf "%4.3f", $1+$2/$3}'</span>
</code></pre></div></div>

<ul>
  <li>Suppress 1) warnings and errors 2) all outputs from a command</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1<span class="o">)</span> <span class="nv">$command</span> 2&gt; /dev/null
2<span class="o">)</span> <span class="nv">$command</span> 1&gt; /dev/null 2&gt;&amp;1
</code></pre></div></div>

<ul>
  <li>The above might not work inside a script, in which case the <code class="language-plaintext highlighter-rouge">exec</code> command can be used before the commands generating warnings/outputs.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1<span class="o">)</span> <span class="nb">exec </span>2&gt; /dev/null
2<span class="o">)</span> <span class="nb">exec </span>1&gt; /dev/null 2&gt;&amp;1
</code></pre></div></div>

<h2 id="ssh-related">SSH related</h2>

<ul>
  <li>Save host and user name in <code class="language-plaintext highlighter-rouge">~/.ssh/config</code></li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host <span class="nv">$new_host_name</span>
	Hostname <span class="nv">$host_address</span>
	User <span class="nv">$user_name</span>
</code></pre></div></div>

<ul>
  <li>
    <p>Automatic login: paste content of local <code class="language-plaintext highlighter-rouge">~/.ssh/id_rsa.pub</code> to remote <code class="language-plaintext highlighter-rouge">~/.ssh/authorized_keys</code></p>
  </li>
  <li>
    <p>File transfer between local machine and SSH server</p>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span><span class="nb">local </span>to server<span class="o">)</span> rsync <span class="nt">-avh</span> <span class="nt">--progress</span> <span class="nv">$file_path</span> user@host:<span class="nv">$destination</span>
<span class="o">(</span>server to <span class="nb">local</span><span class="o">)</span> rsync <span class="nt">-avh</span> <span class="nt">--progress</span> user@host:<span class="nv">$file_path</span> <span class="nv">$destination</span>
</code></pre></div></div>

<h1 id="python">Python</h1>

<ul>
  <li>Since Python 3.4, it’s preferable to use <code class="language-plaintext highlighter-rouge">pip</code> with</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="nb">list</span>
<span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pip</span> <span class="o">--</span><span class="n">user</span>
<span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">numpy</span>
</code></pre></div></div>

<ul>
  <li>Find out which python (e.g. in Jupyter-lab)</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="p">.</span><span class="n">executable</span>
</code></pre></div></div>

<ul>
  <li>Install a package of a specific version</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">new</span> <span class="n">installation</span><span class="p">)</span> <span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">Iv</span> <span class="n">package_name</span><span class="o">==</span><span class="n">version</span>
<span class="p">(</span><span class="n">existing</span> <span class="n">installation</span><span class="p">)</span> <span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">I</span> <span class="n">package_name</span><span class="o">==</span><span class="n">version</span>
</code></pre></div></div>

<ul>
  <li>Print elapsed time in hour-minute-second format</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">time</span>
<span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%H:%M:%S"</span><span class="p">,</span> <span class="n">time</span><span class="p">.</span><span class="n">gmtime</span><span class="p">(</span><span class="n">elapsed_time</span><span class="p">))</span>
</code></pre></div></div>

<ul>
  <li>Create function handle (i.e. equivalent to <code class="language-plaintext highlighter-rouge">myfunc = @(x) func(10, x)</code> in Matlab)</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">myfunc</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">func</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>Call function with dynamic name</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">from</span> <span class="n">another</span> <span class="n">module</span><span class="p">)</span> <span class="n">output</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module_name</span><span class="p">,</span> <span class="s">'func_name'</span><span class="p">)(</span><span class="n">parameters</span><span class="p">)</span>
<span class="p">(</span><span class="k">from</span> <span class="n">the</span> <span class="n">same</span> <span class="n">module</span><span class="p">)</span> <span class="n">output</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()[</span><span class="s">'func_name'</span><span class="p">](</span><span class="n">parameters</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>Reload a module (to reflect changes made to the module)</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">importlib</span> <span class="kn">import</span> <span class="nb">reload</span>
<span class="nb">reload</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>Write <code class="language-plaintext highlighter-rouge">stdout</code> to a log file at real time (from command line)</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-u</span> <span class="nv">$file_name</span>.py <span class="o">&gt;</span> <span class="nv">$log_name</span>.txt
</code></pre></div></div>

<h1 id="matlab">Matlab</h1>

<ul>
  <li>Write <code class="language-plaintext highlighter-rouge">long</code> values to a csv file (e.g. with a precision of <code class="language-plaintext highlighter-rouge">6</code>)</li>
</ul>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">dlmwrite</span><span class="p">(</span><span class="s1">'file_name.csv'</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">,</span> <span class="s1">'precision'</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
</code></pre></div></div>

<h1 id="vim">Vi(m)</h1>

<ul>
  <li>turn off search (#) highlighting</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>:noh
</code></pre></div></div>

<h1 id="jekyll">Jekyll</h1>

<ul>
  <li>Install bundles according to specification in <code class="language-plaintext highlighter-rouge">Gemfile</code></li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle install --path vendor/bundle
</code></pre></div></div>

<ul>
  <li>Build a site with Jekyll locally</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle <span class="nb">exec </span>jekyll serve
<span class="o">(</span><span class="k">in </span>the browser<span class="o">)</span> http://localhost:4000
</code></pre></div></div>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/jadecci/jadecci.github.io">jadecci.github.io</a> is maintained by <a href="https://github.com/jadecci">jadecci</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
  </body>
</html>
